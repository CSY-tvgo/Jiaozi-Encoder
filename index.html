<!DOCTYPE html>
<html lang="zh-Hans">

<head>
    <title>ЁЯеЯ ще║хнРшпншиАч┐╗шпСхЩи</title>

    <meta charset="UTF-8">

    <link rel="stylesheet" href="./codemirror-5.31.0/lib/codemirror.css" />
    <script src="./codemirror-5.31.0/lib/codemirror.js"></script>
    <script src="./codemirror-5.31.0/clike.js"></script>
    <link rel="stylesheet" href="./codemirror-5.31.0/theme/myTheme.css" />
    <link rel="stylesheet" href="./codemirror-5.31.0/addon/fold/foldgutter.css" />
    <script src="./codemirror-5.31.0/addon/fold/foldcode.js"></script>
    <script src="./codemirror-5.31.0/addon/fold/foldgutter.js"></script>
    <script src="./codemirror-5.31.0/addon/fold/brace-fold.js"></script>
    <script src="./codemirror-5.31.0/addon/fold/comment-fold.js"></script>
    <script src="./codemirror-5.31.0/addon/edit/matchbrackets.js"></script>

    <script src="./codemirror-5.31.0/addon/scroll/annotatescrollbar.js"></script>
    <script src="./codemirror-5.31.0/addon/search/matchesonscrollbar.js"></script>
    <script src="./codemirror-5.31.0/addon/search/match-highlighter.js"></script>
    <script src="./codemirror-5.31.0/addon/search/jump-to-line.js"></script>

    <script src="./codemirror-5.31.0/addon/dialog/dialog.js"></script>
    <link rel="stylesheet" href="./codemirror-5.31.0/addon/dialog/dialog.css" />
    <script src="./codemirror-5.31.0/addon/search/searchcursor.js"></script>
    <script src="./codemirror-5.31.0/addon/search/search.js"></script>

    <script src="./codemirror-5.31.0/jquery-3.3.1.js"></script>

    <style type="text/css">
        .title-container {
            margin-top: -0.5em;
            display: grid;
            align-items: baseline;
            grid-template-columns: 40% 60%;
        }

        .converter-container {
            display: grid;
            grid-template-rows: auto;
            grid-template-columns: 39% 22% 39%;
        }

        .CodeMirror {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 16px;
            line-height: 20px;
        }

        .code-header {
            background-color: rgb(149, 149, 151);
            color: white;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 2px solid #F2F2F2;
            font-size: 1.1rem;
        }

        .code-window-zhongwen {
            background: #fff;
            box-shadow: 0px 0px 10px rgb(0 0 0 / 16%);
            margin: 1rem;
            overflow: hidden;
            border-radius: 1.0rem 0.2rem 0.2rem 1.0rem;
        }

        .code-window-buttons {
            background: #fff;
            box-shadow: 0px 0px 10px rgb(0 0 0 / 0%);
            margin: 0rem;
            overflow: hidden;
            border-radius: 0.2rem;
            vertical-align: middle;
            display: flex;
            flex-direction: column;
            /* align-items: center; */
            justify-content: center;
        }

        .code-window-jiaozi {
            background: #fff;
            box-shadow: 0px 0px 10px rgb(0 0 0 / 16%);
            margin: 1rem;
            overflow: hidden;
            border-radius: 0.2rem 1.0rem 1.0rem 0.2rem;
        }

        .convert-button {
            background-color: rgb(245, 223, 77);
            color: rgb(55, 57, 72);
            font-weight: 700;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            text-decoration: none;
            transition-duration: 0.5s;
            overflow: hidden;
        }

        .convert-button:hover {
            background-color: rgb(207, 195, 133);
            background-color: rgba(245, 223, 77, 0.5);
            color: rgb(55, 57, 72);
        }

        .convert-button:active {
            background-color: rgb(110, 143, 112);
            color: rgb(55, 57, 72);
        }

        /* цЬкшо┐щЧочЪДщУ╛цОе */
        a:link {
            color: rgb(0, 0, 0);
        }

        /* х╖▓шо┐щЧочЪДщУ╛цОе */
        a:visited {
            color: rgb(0, 0, 0);
        }

        /* щ╝ацаЗцВмхБЬщУ╛цОе */
        a:hover {
            color: rgb(76, 110, 133);
        }
    </style>
</head>


<body>
    <div class="title-container">
        <div>
            <h1>ЁЯеЯ ще║хнРшпншиАч┐╗шпСхЩи</h1>
            &nbsp; by <a href="https://github.com/csy-tvgo" target="_blank">Karbon</a>
        </div>
    </div>

    <div class="converter-container">

        <div class="code-window-zhongwen">
            <header class="code-header">
                ф╕нцЦЗ &nbsp; &nbsp;
                <button type="button" onclick="clearContent('zhongwen')">ц╕Ечй║</button> &nbsp; &nbsp;
                <button type="button" onclick="copyContent('zhongwen')">хдНхИ╢</button>
            </header>
            <textarea class="code-editor-zhongwen" id="editor-zhongwen">
            </textarea>
        </div>
        <div class="code-window-buttons">
            <a class="convert-button" href="javascript:execute_encode()">
                <br />=== ЁЯеЯ ще║хнР ==><br /><br />
            </a>
            &nbsp;
            <a class="convert-button" href="javascript:execute_decode()">
                <br /> &lt;=== шзгчаБ ====<br /><br />
            </a>
        </div>
        <div class="code-window-jiaozi">
            <header class="code-header">
                ЁЯеЯ ще║хнР &nbsp; &nbsp;
                <button type="button" onclick="clearContent('jiaozi')">ц╕Ечй║</button> &nbsp; &nbsp;
                <button type="button" onclick="copyContent('jiaozi')">хдНхИ╢</button>
            </header>
            <textarea class="code-editor-jiaozi" id="editor-jiaozi">
            </textarea>
        </div>
    </div>
    <p align="right">
        <small>
            This page is open sourced on <a href="https://github.com/CSY-tvgo/Jiaozi-Encoder" target="_blank">
                GitHub</a>.
            &nbsp;&nbsp;
        </small>
    </p>

    <script>

        const my_theme = "myTheme"

        var editor_zhongwen = CodeMirror.fromTextArea(document.getElementById("editor-zhongwen"), {
            mode: "text/x-csrc",
            lineNumbers: true,
            theme: my_theme,
            foldGutter: true,
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
            matchBrackets: true,
            indentUnit: 4,
            lineWrapping: true,
        })
        editor_zhongwen.setSize('auto', '30rem')
        editor_zhongwen.setOption("value", "цККф╜ацГ│ш╜мцНвчЪДхОЯцЦЗш╛УхЕехЬиш┐ЩщЗМя╝МчВ╣хЗ╗ш╜мцНвцМЙщТохРОя╝МхП│ф╛зф╝ЪцШ╛чд║ще║хнРЁЯеЯя╝Б")

        var editor_jiaozi = CodeMirror.fromTextArea(document.getElementById("editor-jiaozi"), {
            mode: "text/x-csrc",
            lineNumbers: true,
            theme: my_theme,
            foldGutter: true,
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
            matchBrackets: true,
            indentUnit: 4,
            lineWrapping: true,
        })
        editor_jiaozi.setSize('auto', '30rem')
        editor_jiaozi.setValue("ще║ще║ще║хнРще║хнРхнРхнРще║хнРще║хнРхнРще║ще║ще║ще║хнРще║хнРхнРхнРще║ще║ще║ще║ще║хнРхнРще║ще║ще║ще║хнРще║хнРхнРхнРхнРхнРще║хнРхнРхнРхнРхнРхнРще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРще║ще║хнРще║хнРще║ще║хнРхнРхнРще║хнРще║ще║ще║ще║ще║хнРще║хнРхнРхнРще║хнРще║хнРще║ще║ще║ще║ще║хнРхнРще║хнРще║хнРще║я╝Мще║ще║ще║хнРхнРще║хнРще║ще║хнРще║хнРхнРще║ще║хнРще║хнРхнРхнРхнРхнРще║хнРще║ще║ще║хнРхнРще║ще║хнРще║хнРхнРще║ще║ще║ще║хнРще║хнРхнРще║ще║ще║хнРхнРще║ще║ще║хнРхнРще║хнРхнРще║хнРще║ще║ще║ще║хнРще║ще║хнРще║хнРхнРхнРхнРхнРще║ще║ще║хнРще║хнРхнРхнРще║хнРхнРхнРхнРхнРще║ще║ще║хнРще║ще║ще║ще║хнРще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРще║хнРще║ще║хнРще║ще║хнРще║хнРхнРхнРще║ще║ще║ще║ще║хнРхнРще║хнРще║ще║хнРще║ще║ще║хнРхнРхнРще║хнРще║ще║ще║хнРхнРхнРще║ще║ще║хнРхнРще║ще║ще║ще║хнРхнРще║ще║ще║хнРхнРще║хнРхнРхнРще║хнРще║ще║ще║ще║ще║хнРхнРще║хнРще║ще║хнРхнРхнРще║хнРхнРхнРще║хнРще║ще║хнРхнРхнРхнРще║ще║ще║хнРще║хнРхнРхнРще║хнРще║ще║ще║ще║ще║ще║ще║хнРхнРще║ще║хнРхнРще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРще║хнРще║ще║ще║хнРще║хнРще║ще║хнРще║хнРще║ще║ще║ще║хнРще║хнРхнРхнРще║хнРще║хнРще║ще║ще║ще║ще║хнРхнРще║ще║ще║хнРще║я╝Мще║ще║ще║хнРще║хнРхнРхнРще║хнРще║хнРще║ще║ще║ще║ще║хнРще║ще║хнРще║хнРхнРще║ще║ще║хнРхнРще║ще║хнРще║хнРхнРще║ще║хнРхнРхнРще║хнРхнРхнРще║ще║ще║хнРще║ще║ще║хнРще║хнРхнРхнРще║хнРще║хнРхнРще║ще║ще║ще║хнРще║хнРхнРхнРще║ще║ще║ще║ще║хнРхнРще║ще║ще║ще║хнРще║хнРхнРхнРхнРхнРще║хнРхнРхнРхнРхнРхнРще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРхнРще║ще║хнРхнРхнРще║хнРще║хнРще║ще║ще║ще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРхнРхнРще║хнРхнРхнРще║хнРхнРще║хнРхнРхнРхнРще║ще║ще║хнРхнРще║хнРще║ще║хнРхнРхнРще║хнРще║хнРще║хнРхнРще║ще║ще║ще║ще║ще║ще║ще║хнРхнРще║ще║ще║ще║хнРхнРще║ще║хнРще║хнРще║хнРхнРхнРхнРще║хнРхнРЁЯдкуАВ")

        function isChinese(str) {
            var reg = /[\u4e00-\u9fa5]/g;
            return reg.test(str);
        }

        function Chinese_to_UTF8_BIN(str) {
            hex = encodeURI(str).replaceAll('%', '');
            binaryString = '';
            for (let i = 0; i < hex.length; i += 2) {
                const byte = parseInt(hex.substr(i, 2), 16);
                binaryString += byte.toString(2).padStart(8, '0');
            }
            return binaryString;
        }

        function convert_zhongwen_to_jiaozi(code_zhongwen) {
            var convert_result = ""
            for (let i = 0; i < code_zhongwen.length; i++) {
                if (isChinese(code_zhongwen[i])) {
                    thisZhongwen = Chinese_to_UTF8_BIN(code_zhongwen[i]).replace(/1/g, "ще║").replace(/0/g, "хнР")
                    convert_result += thisZhongwen
                }
                else {
                    convert_result += code_zhongwen[i]
                }
            }
            return convert_result
        }

        function UTF8_BIN_to_Chinese(str) {
            hex = ""
            for (let i = 0; i < str.length; i += 8) {
                const byte = parseInt(str.substr(i, 8), 2);
                hex += '%' + byte.toString(16).padStart(2, '0');
            }
            console.log(hex)
            ChineseString = decodeURI(hex);
            return ChineseString;
        }

        function convert_jiaozi_to_zhongwen(code_jiaozi) {
            var convert_result = ""
            for (let i = 0; i < code_jiaozi.length; i++) {
                if (code_jiaozi[i] == "ще║" || code_jiaozi[i] == "хнР") {
                    temp = code_jiaozi.substr(i, 24).replace(/ще║/g, "1").replace(/хнР/g, "0")
                    thisJiaozi = UTF8_BIN_to_Chinese(temp)
                    convert_result += thisJiaozi
                    i += 23
                }
                else {
                    convert_result += code_jiaozi[i]
                }
            }
            return convert_result
        }

        function execute_encode() {
            var code_zhongwen = editor_zhongwen.getValue()
            var code_jiaozi = convert_zhongwen_to_jiaozi(code_zhongwen)
            editor_jiaozi.setValue(code_jiaozi)
        }

        function execute_decode() {
            var code_jiaozi = editor_jiaozi.getValue()
            var code_zhongwen = convert_jiaozi_to_zhongwen(code_jiaozi)
            editor_zhongwen.setValue(code_zhongwen)
        }

        function copyContent(source) {
            // Ref: https://www.30secondsofcode.org/articles/s/copy-text-to-clipboard-with-javascript
            const el = document.createElement('textarea')
            if (source == "zhongwen")
                el.value = editor_zhongwen.getValue();
            else if (source == "jiaozi")
                el.value = editor_jiaozi.getValue();
            else
                return;
            el.setAttribute('readonly', '')
            el.style.position = 'absolute'
            el.style.left = '-9999px'
            document.body.appendChild(el)
            el.select()
            document.execCommand('copy')
            document.body.removeChild(el)
            alert("\nф╜ачВ╣хЗ╗ф║ЖхдНхИ╢цМЙщТоя╝Б\n\nя╝ИцЬЙчЪДц╡ПшзИхЩишГ╜хдНхИ╢цИРхКЯя╝МцЬЙчЪДф╕НшГ╜я╝Й")
        }

        function clearContent(source) {
            var yes = confirm("ф╜ачбохоЪшжБц╕Ечй║хРЧя╝Я")
            if (yes == true) {
                if (source == "zhongwen")
                    editor_zhongwen.setValue("")
                else if (source == "jiaozi")
                    editor_jiaozi.setValue("")
                else
                    return;
            }
        }

    </script>

</body>

</html>